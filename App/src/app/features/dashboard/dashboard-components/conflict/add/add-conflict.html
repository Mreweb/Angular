<div class="row page-table">

    <div class="col-lg-12 grid-margin ">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-custom">
                <li class="breadcrumb-item" [class.active]="formStep > 1">ثبت عنوان مغایرت گیری</li>
                <li class="breadcrumb-item" [class.active]="formStep > 2">انتخاب فایل های اکسل</li>
                <li class="breadcrumb-item" [class.active]="formStep > 3">انتخاب ستون های همتا</li>
                <li class="breadcrumb-item" [class.active]="formStep > 4">مغایرت گیری</li>
                <li class="breadcrumb-item"></li>
            </ol>
        </nav>
        <div
        *ngIf="formStep > 1"
        class="progress-bar bg-success progress-bar-striped progress-bar-animated"
            [style.width]="((formStep-1)*25)+'%'" role="progressbar" style="height:40px;" aria-valuenow="90"
            aria-valuemin="0" aria-valuemax="100">
            {{ (formStep-1)*25 }} %
        </div>
    </div>

    <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <form *ngIf="formStep == 1" [formGroup]="addConflictTitleForm" class="forms-sample">
                    <div class="col-12">
                        <div class="form-group">
                            <label for="newConflictName">عنوان مغایرت گیری</label>
                            <input type="text" class="form-control" formControlName="newConflictName"
                                id="newConflictName" placeholder="عنوانی برای وارد کنید">
                        </div>
                    </div>
                    <button type="submit" (click)="doAddNewConflictTitle()" class="btn btn-primary mr-2">ثبت و
                        ادامه</button>
                </form>

                <form *ngIf="formStep == 2" [formGroup]="uploadConflictFileForm" class="forms-sample">
                    <div class="row">
                        <div class="col-lg-6 grid-margin stretch-card">
                            <div class="card-body">
                                <div class="dropify-wrapper">
                                    <div class="dropify-message"><span class="file-icon"></span>
                                        <p>فایل اکسل بانک را انتخاب کنید</p>
                                        <p *ngIf="bankFileIsValid" class="dropify-error">فایل انتخاب شد</p>
                                    </div>
                                    <div class="dropify-loader"></div>
                                    <div class="dropify-errors-container">
                                        <ul></ul>
                                    </div>
                                    <input (change)="onFileChange($event  , 'bank')" type="file" class="dropify">
                                    <div class="dropify-preview"><span class="dropify-render"></span>
                                        <div class="dropify-infos">
                                            <div class="dropify-infos-inner">
                                                <p class="dropify-filename"><span class="file-icon"></span> <span
                                                        class="dropify-filename-inner"></span></p>
                                                <p class="dropify-infos-message">
                                                    فایل اکسل بانک را انتخاب کنید
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 grid-margin stretch-card">
                            <div class="card-body">
                                <div class="dropify-wrapper">
                                    <div class="dropify-message"><span class="file-icon"></span>
                                        <p>
                                            فایل اکسل حسابداری را انتخاب کنید
                                        </p>
                                        <p *ngIf="companyFileIsValid" class="dropify-error">فایل انتخاب شد</p>
                                    </div>
                                    <div class="dropify-loader"></div>
                                    <div class="dropify-errors-container">
                                        <ul></ul>
                                    </div>
                                    <input (change)="onFileChange($event , 'company')" type="file" class="dropify">
                                    <div class="dropify-preview"><span class="dropify-render"></span>
                                        <div class="dropify-infos">
                                            <div class="dropify-infos-inner">
                                                <p class="dropify-filename"><span class="file-icon"></span> <span
                                                        class="dropify-filename-inner"></span></p>
                                                <p class="dropify-infos-message">
                                                    فایل اکسل حسابداری را انتخاب کنید
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <button type="submit" (click)="doAddNewConflictUploadFiles()" class="btn btn-primary mr-2">ثبت و
                            ادامه</button>
                    </div>
                </form>

                <form *ngIf="formStep == 3" [formGroup]="conflictColumns" class="forms-sample">
                    <div class="row">
                        <div class="col-lg-6 grid-margin">
                            <h1 class="alert alert-info text-center">انتخاب ستون های اکسل بانک</h1>

                            <label>انتخاب صفحه اکسل</label>
                            <select class="form-control" formControlName="BankSheet">
                                <option value="">-- انتخاب کنید --</option>
                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                    {{ item.name }}
                                </option>
                            </select>
                            <p>&nbsp;</p>
                            <table class="table table-hover table-bordered table-striped text-center">
                                <thead>
                                    <tr>
                                        <th>عنوان ستون</th>
                                        <th>ستون همتا در اکسل بانک</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>عنوان</td>
                                        <td>
                                            <select class="form-control" formControlName="BankTitle">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>مبلغ</td>
                                        <td>
                                            <select class="form-control" formControlName="BankPrice">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>کد رهگیری</td>
                                        <td>
                                            <select class="form-control" formControlName="BankTrackingCode">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>تاریخ</td>
                                        <td>
                                            <select class="form-control" formControlName="BankDate">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-6 grid-margin">
                            <h1 class="alert alert-info text-center">انتخاب ستون های اکسل حسابداری</h1>
                            <label>انتخاب صفحه اکسل</label>
                            <select class="form-control" formControlName="CompanySheet">
                                <option value="">-- انتخاب کنید --</option>
                                <option *ngFor="let item of bankFileServerColumns;" value="item.id">
                                    {{ item.name }}
                                </option>
                            </select>
                            <p>&nbsp;</p>
                            <table class="table table-hover table-bordered table-striped text-center">
                                <thead>
                                    <tr>
                                        <th>عنوان ستون</th>
                                        <th>ستون همتا در اکسل حسابداری</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>عنوان</td>
                                        <td>
                                            <select class="form-control" formControlName="CompanyTitle">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of companyFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>مبلغ</td>
                                        <td>
                                            <select class="form-control" formControlName="CompanyPrice">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of companyFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>کد رهگیری</td>
                                        <td>
                                            <select class="form-control" formControlName="CompanyTrackingCode">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of companyFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>تاریخ</td>
                                        <td>
                                            <select class="form-control" formControlName="CompanyDate">
                                                <option value="">-- انتخاب کنید --</option>
                                                <option *ngFor="let item of companyFileServerColumns;" value="item.id">
                                                    {{ item.name }}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-12">
                        <button type="submit" (click)="doAddNewConflictSelectColumns()" class="btn btn-primary mr-2">ثبت
                            و ادامه</button>
                    </div>
                </form>


                <div class="col-12 text-left">
                    <button (click)="resetForm()" class="btn btn-default">بازنشانی از ابتدا</button>
                </div>
            </div>
        </div>
    </div>
</div>